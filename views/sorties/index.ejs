<%- include("../_header") -%>

<h1> Agenda du BDE </h1>
<% if(typeof (error) != "undefined"){ %>
  <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong><%=  error  %></strong>
  </div>
<% } %>
<div class="table-responsive-sm">
  <table class="table table-hover" id="sorties">
    <thead>
      <tr>
        <th>Id Sortie</th>
        <th>Nom</th>
        <th>Date</th>
        <th>Prix</th>
        <th>Nombre de participants</th>
        <th>Lieu</th>
        <th>Reference Produit</th>
        <th class="d-print-none">
          <a class="btn btn-sm btn-success" href="/sorties/create">Ajouter</a>
        </th>
      </tr>
    </thead>
    <tbody>
      <% for (const sortie of model) { %>
        <tr>
          <td><%= sortie.idsortie  %></td>
          <td><%= sortie.nomsortie  %></td>
          <td><%=  moment(sortie.datesortie).format('YYYY-MM-DD')  %></td>
          <td><%= sortie.prixsortie   %></td>
          <td><%= sortie.nbparticipants   %></td>
          <td><%= sortie.lieusortie   %></td>
          <td><%= sortie.idproduit   %></td>
          <td class="d-print-none">
            <a class="btn btn-sm btn-warning" href="/sorties/edit/<%= sortie.idsortie %>">Modifier</a>
            <a class="btn btn-sm btn-danger" href="/sorties/delete/<%= sortie.idsortie %>">Effacer</a>
            <a class="btn btn-sm btn-danger" href="/sorties/participants/<%= sortie.idsortie %>">Participants</a>
          </td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Inclure Datatables -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>

  <!-- Initialiser Datatables -->
  <script>
    $(document).ready(function() {
        $('#sorties').DataTable();
    });
  </script>

</div>

<%- include("../_footer") -%>